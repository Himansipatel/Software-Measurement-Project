<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 17 February 2019
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="iso-8859-1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Commons Documentation Team" />
    <meta name="Date-Revision-yyyymmdd" content="20190217" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Commons IO &#x2013; Best practices</title>

  <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css" />
  <link rel="stylesheet" href="css/site.css" type="text/css" />
    <link rel="stylesheet" href="css/print.css" media="print" />

  <script type="text/javascript" src="js/jquery.min.js"></script>
  <script type="text/javascript" src="js/bootstrap.min.js"></script>
  <script type="text/javascript" src="js/prettify.min.js"></script>
  <script type="text/javascript" src="js/site.js"></script>

              
      </head>

  <body class="composite">
                          <a href="../../index.html" id="bannerLeft" title="Apache Commons logo">
                                                                                        <img class="logo-left" src="images/commons-logo.png"  alt="Apache Commons logo"/>
                </a>
                                              <a href="index.html" id="bannerRight">
                                                                                                <img class="logo-right" src="images/io-logo-white.png"  alt="Commons IO"/>
                </a>
          <div class="clear"></div>

    <div class="navbar">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="brand" href="index.html">Apache Commons IO &trade;</a>
          <ul class="nav">      
                    
            <li id="publishDate">Last Published: 17 February 2019</li>
      <li class="divider">|</li> <li id="projectVersion">Version: 2.7-SNAPSHOT</li>
  </ul>
                    <div class="pull-right">  <ul class="nav">
            <li>
                  <a href="http://www.apachecon.com/" class="externalLink" title="ApacheCon">
    ApacheCon</a>
      </li>
          <li>
                  <a href="http://www.apache.org" class="externalLink" title="Apache">
    Apache</a>
      </li>
          <li>
                  <a href="../../index.html" title="Commons">
    Commons</a>
      </li>
    </ul>
</div>
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <table class="layout-table">
        <tr>
          <td class="sidebar">
            <div class="well sidebar-nav">
                    <ul class="nav nav-list">
                                  <li class="nav-header">Commons IO</li>
                                        <li class="none">
                  <a href="index.html" title="Overview">
    Overview</a>
          </li>
                             <li class="none">
                  <a href="../../io/download_io.cgi.html" title="Download">
    Download</a>
          </li>
                             <li class="none">
                  <a href="description.html" title="User guide">
    User guide</a>
          </li>
                               <li class="none active">
                  <a href="bestpractices.html" title="Best practices">
    Best practices</a>
          </li>
                             <li class="none">
                  <a href="javadocs/api-release/index.html" title="Javadoc 2.6">
    Javadoc 2.6</a>
          </li>
                             <li class="none">
                  <a href="javadocs/api-2.5/index.html" title="Javadoc 2.5">
    Javadoc 2.5</a>
          </li>
                             <li class="none">
                  <a href="javadocs/api-2.4/index.html" title="Javadoc 2.4">
    Javadoc 2.4</a>
          </li>
                             <li class="none">
                  <a href="javadocs/api-2.3/index.html" title="Javadoc 2.3">
    Javadoc 2.3</a>
          </li>
                             <li class="none">
                  <a href="javadocs/api-2.2/index.html" title="Javadoc 2.2">
    Javadoc 2.2</a>
          </li>
                             <li class="none">
                  <a href="javadocs/api-1.4/index.html" title="Javadoc 1.4">
    Javadoc 1.4</a>
          </li>
                 </ul>
      <ul class="nav nav-list">
                                        <li class="nav-header"><i class="icon-cog"></i>Development</li>
                                        <li class="none">
                  <a href="building.html" title="Building">
    Building</a>
          </li>
                             <li class="none">
                  <a href="mail-lists.html" title="Mailing lists">
    Mailing lists</a>
          </li>
                             <li class="none">
                  <a href="issue-tracking.html" title="Issue Tracking">
    Issue Tracking</a>
          </li>
                             <li class="none">
                  <a href="https://commons.apache.org/proper/commons-io/team-list.html" title="Team">
    Team</a>
          </li>
                             <li class="none">
                  <a href="tasks.html" title="Tasks">
    Tasks</a>
          </li>
                             <li class="none">
                  <a href="proposal.html" title="Proposal">
    Proposal</a>
          </li>
                             <li class="none">
                  <a href="https://commons.apache.org/proper/commons-io/source-repository.html" title="Source repository">
    Source repository</a>
          </li>
                             <li class="none">
                  <a href="apidocs/index.html" title="Javadoc (GIT latest)">
    Javadoc (GIT latest)</a>
          </li>
                 </ul>
      <ul class="nav nav-list">
                                        <li class="nav-header"><i class="icon-info-sign"></i>Project Documentation</li>
                                                                                                                                                                                                                                                                              <li class="collapsed">
                  <a href="project-info.html" title="Project Information">
    Project Information</a>
                    </li>
                                                                                                                                                                                                                                                                                                       <li class="collapsed">
                  <a href="project-reports.html" title="Project Reports">
    Project Reports</a>
                    </li>
                 </ul>
      <ul class="nav nav-list">
                                  <li class="nav-header">Commons</li>
                                        <li class="none">
                  <a href="../../index.html" title="Home">
    Home</a>
          </li>
                             <li class="none">
                  <a href="http://www.apache.org/licenses/" class="externalLink" title="License">
    License</a>
          </li>
                                                                               <li class="collapsed">
                  <a href="../../components.html" title="Components">
    Components</a>
                    </li>
                                                                               <li class="collapsed">
                  <a href="../../sandbox.html" title="Sandbox">
    Sandbox</a>
                    </li>
                                                                               <li class="collapsed">
                  <a href="../../dormant.html" title="Dormant">
    Dormant</a>
                    </li>
                 </ul>
      <ul class="nav nav-list">
                                  <li class="nav-header">General Information</li>
                                        <li class="none">
                  <a href="../../security.html" title="Security">
    Security</a>
          </li>
                             <li class="none">
                  <a href="../../volunteering.html" title="Volunteering">
    Volunteering</a>
          </li>
                             <li class="none">
                  <a href="../../patches.html" title="Contributing Patches">
    Contributing Patches</a>
          </li>
                             <li class="none">
                  <a href="../../building.html" title="Building Components">
    Building Components</a>
          </li>
                             <li class="none">
                  <a href="../../commons-parent-pom.html" title="Commons Parent Pom">
    Commons Parent Pom</a>
          </li>
                             <li class="none">
                  <a href="../commons-build-plugin/index.html" title="Commons Build Plugin">
    Commons Build Plugin</a>
          </li>
                             <li class="none">
                  <a href="../../releases/index.html" title="Releasing Components">
    Releasing Components</a>
          </li>
                             <li class="none">
                  <a href="http://wiki.apache.org/commons/FrontPage" class="externalLink" title="Wiki">
    Wiki</a>
          </li>
                 </ul>
      <ul class="nav nav-list">
                                  <li class="nav-header">ASF</li>
                                        <li class="none">
                  <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">
    How the ASF works</a>
          </li>
                             <li class="none">
                  <a href="http://www.apache.org/foundation/getinvolved.html" class="externalLink" title="Get Involved">
    Get Involved</a>
          </li>
                             <li class="none">
                  <a href="http://www.apache.org/dev/" class="externalLink" title="Developer Resources">
    Developer Resources</a>
          </li>
                             <li class="none">
                  <a href="http://www.apache.org/foundation/policies/conduct.html" class="externalLink" title="Code of Conduct">
    Code of Conduct</a>
          </li>
                             <li class="none">
                  <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">
    Sponsorship</a>
          </li>
                             <li class="none">
                  <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">
    Thanks</a>
          </li>
                 </ul>
              </div>
            <div id="poweredBy">
                                                                                                                    <a href="http://www.apache.org/events/current-event.html" title="ApacheCon" class="builtBy">
        <img class="builtBy"  alt="ApacheCon" src="http://www.apache.org/events/current-event-125x125.png"    />
      </a>
                                                                                                    <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
                      </div>
          </td>
          <td class="content">
            
 

    <div class="section">
<h2><a name="Best_practices"></a>Best practices</h2>
        
<p>
            This document presents a number of 'best practices' in the IO area.
        </p>
    </div>

    
<div class="section">
<h2><a name="java.io.File"></a>java.io.File</h2>
    
        
<p>
            Often, you have to deal with files and filenames. There are many
            things that can go wrong:
        </p>
        
<ul>
            
<li>A class works in Unix but doesn't on Windows (or vice versa)</li>
            
<li>Invalid filenames due to double or missing path separators</li>
            
<li>UNC filenames (on Windows) don't work with my home-grown filename utility function</li>
            
<li>etc. etc.</li>
        </ul>
        
<p>
            These are good reasons not to work with filenames as Strings.
            Using java.io.File instead handles many of the above cases nicely.
            Thus, our best practice recommendation is to use java.io.File
            instead of String for filenames to avoid platform dependencies.
        </p>
        
<p>
            <i>
            Version 1.1 of commons-io now includes a dedicated filename
            handling class - <a href="https://commons.apache.org/proper/commons-io/javadocs/api-release/index.html?org/apache/commons/io/FilenameUtils.html">FilenameUtils</a>.
            This does handle many of these filename issues, however we still
            recommend, wherever possible, that you use java.io.File objects.
            </i>
        </p>
        
<p>
            Let's look at an example.
        </p>
        
<div class="source">
<pre>
 public static String getExtension(String filename) {
   int index = filename.lastIndexOf('.');
   if (index == -1) {
     return &quot;&quot;;
   } else {
     return filename.substring(index + 1);
   }
 }</pre></div>
        
<p>
            Easy enough? Right, but what happens if someone passes in a full path 
            instead of only a filename? Consider the following, perfectly legal path:
            &quot;C:\Temp\documentation.new\README&quot;.
            The method as defined above would return &quot;new\README&quot; - definitely
            not what you wanted.
        </p>
        
<p>
            Please use java.io.File for filenames instead of Strings.
            The functionality that the class provides is well tested.
            In FileUtils you will find other useful utility functions
            around java.io.File.
        </p>
        
<p>
            Instead of:
        </p>
        
<div class="source">
<pre>
 String tmpdir = &quot;/var/tmp&quot;;
 String tmpfile = tmpdir + System.getProperty(&quot;file.separator&quot;) + &quot;test.tmp&quot;;
 InputStream in = new java.io.FileInputStream(tmpfile);</pre></div>
        
<p>
            ...write:
        </p>
        
<div class="source">
<pre>
 File tmpdir = new File(&quot;/var/tmp&quot;);
 File tmpfile = new File(tmpdir, &quot;test.tmp&quot;);
 InputStream in = new java.io.FileInputStream(tmpfile);</pre></div>

    </div>
    
    
<div class="section">
<h2><a name="Buffering_streams"></a>Buffering streams</h2>
        
<p>
            IO performance depends a lot from the buffering strategy. Usually, it's 
            quite fast to read packets with the size of 512 or 1024 bytes because
            these sizes match well with the packet sizes used on harddisks in 
            file systems or file system caches. But as soon as you have to read only 
            a few bytes and that many times performance drops significantly.
        </p>
        
<p>
            Make sure you're properly buffering streams when reading or writing 
            streams, especially when working with files. Just decorate your 
            FileInputStream with a BufferedInputStream:
        </p>
        
<div class="source">
<pre>
 InputStream in = new java.io.FileInputStream(myfile);
 try {
   in = new java.io.BufferedInputStream(in);
   
   in.read(.....
 } finally {
   IOUtils.closeQuietly(in);
 }</pre></div>
        
<p>
            Pay attention that you're not buffering an already buffered stream. Some
            components like XML parsers may do their own buffering so decorating
            the InputStream you pass to the XML parser does nothing but slowing down
            your code. If you use our CopyUtils or IOUtils you don't need to 
            additionally buffer the streams you use as the code in there already
            buffers the copy process. Always check the Javadocs for information. 
            Another case where buffering is unnecessary is when you write to a 
            ByteArrayOutputStream since you're writing to memory only.
        </p>
    </div>

  


          </td>
        </tr>
      </table>
    </div>

    <div class="footer">
      <p>Copyright &copy;                    2002-2019
                        <a href="https://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.</p>
                </div>
  </body>

</html>